{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\du200\\\\Documents\\\\GitHub\\\\frontend\\\\my-app\\\\src\\\\map.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useLocation, useSearchParams, useNavigate } from \"react-router-dom\";\nimport \"./map.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = \"http://localhost:5000\";\nasync function apiGet(path) {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method: \"GET\",\n    credentials: \"include\" // ì„¸ì…˜ ìœ ì§€ë¥¼ ìœ„í•´ í•„ìˆ˜\n  });\n  if (!res.ok) throw new Error(`API GET Error: ${res.status}`);\n  return res.json();\n}\nasync function apiPost(path, body) {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    credentials: \"include\",\n    // ì„¸ì…˜ ìœ ì§€ë¥¼ ìœ„í•´ í•„ìˆ˜\n    body: JSON.stringify(body)\n  });\n  if (!res.ok) throw new Error(`API POST Error: ${res.status}`);\n  return res.json();\n}\nconst API_BASE_URL = 'http://localhost:5000';\nfunction Map() {\n  _s();\n  var _location$state, _location$state2, _selectedRestaurant$s;\n  const mapContainer = useRef(null);\n  const location = useLocation();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  // ìœ„ì¹˜ ì •ë³´ ë°ì´í„°\n  const PROVINCES = [\"ì„œìš¸íŠ¹ë³„ì‹œ\", \"ê²½ê¸°ë„\"];\n  const DISTRICTS_BY_PROVINCE = {\n    \"ì„œìš¸íŠ¹ë³„ì‹œ\": [\"ì€í‰êµ¬\", \"ì˜ë“±í¬êµ¬\", \"ìš©ì‚°êµ¬\", \"ë™ëŒ€ë¬¸êµ¬\", \"ë™ì‘êµ¬\", \"ê´‘ì§„êµ¬\", \"ë§ˆí¬êµ¬\", \"ì„œì´ˆêµ¬\", \"ê°•ë™êµ¬\", \"ì„±ë¶êµ¬\", \"ë„ë´‰êµ¬\", \"ë…¸ì›êµ¬\", \"ê°•ì„œêµ¬\", \"ì–‘ì²œêµ¬\", \"êµ¬ë¡œêµ¬\", \"ê¸ˆì²œêµ¬\", \"ì†¡íŒŒêµ¬\", \"ê°•ë‚¨êµ¬\"],\n    \"ê²½ê¸°ë„\": [\"í™”ì„±ì‹œ ì™€ìš°ë¦¬\", \"ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬\", \"ìˆ˜ì›ì‹œ ì¥ì•ˆêµ¬\", \"ìˆ˜ì›ì‹œ\"]\n  };\n\n  // ìœ„ì¹˜ ì¢Œí‘œ ë°ì´í„°\n  const LOCATION_COORDS = {\n    // --- ì„œìš¸ ---\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\": {\n      lat: 37.6027,\n      lng: 126.9292\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬\": {\n      lat: 37.5263,\n      lng: 126.8962\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬\": {\n      lat: 37.5311,\n      lng: 126.9819\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë™ëŒ€ë¬¸êµ¬\": {\n      lat: 37.5744,\n      lng: 127.0396\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬\": {\n      lat: 37.5124,\n      lng: 126.9398\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬\": {\n      lat: 37.5384,\n      lng: 127.0822\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬\": {\n      lat: 37.5609,\n      lng: 126.9084\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬\": {\n      lat: 37.4836,\n      lng: 127.0327\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë™êµ¬\": {\n      lat: 37.5301,\n      lng: 127.1238\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë¶êµ¬\": {\n      lat: 37.5894,\n      lng: 127.0167\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë„ë´‰êµ¬\": {\n      lat: 37.6688,\n      lng: 127.0471\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë…¸ì›êµ¬\": {\n      lat: 37.6543,\n      lng: 127.0565\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ì„œêµ¬\": {\n      lat: 37.5509,\n      lng: 126.849\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì–‘ì²œêµ¬\": {\n      lat: 37.5169,\n      lng: 126.8664\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ êµ¬ë¡œêµ¬\": {\n      lat: 37.4954,\n      lng: 126.8874\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬\": {\n      lat: 37.4568,\n      lng: 126.895\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬\": {\n      lat: 37.5145,\n      lng: 127.1066\n    },\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬\": {\n      lat: 37.5173,\n      lng: 127.0473\n    },\n    // --- ê²½ê¸° ---\n    \"ê²½ê¸°ë„ í™”ì„±ì‹œ ì™€ìš°ë¦¬\": {\n      lat: 37.2092,\n      lng: 126.9769\n    },\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬\": {\n      lat: 37.292,\n      lng: 127.0107\n    },\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì¥ì•ˆêµ¬\": {\n      lat: 37.2951,\n      lng: 126.9739\n    },\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ\": {\n      lat: 37.2636,\n      lng: 127.0286\n    }\n  };\n  //const foodCategories = [\"ì „ì²´\", \"í•œì‹\", \"ì¤‘ì‹\", \"ì¼ì‹\", \"ì–‘ì‹\", \"ì¹´í˜\"];\n\n  // --- State ì •ì˜ ---\n  const source = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.source; // 'geolocation', 'address', 'chatbot'\n  const urlLat = searchParams.get('lat');\n  const urlLng = searchParams.get('lng');\n  const chatbotRestaurants = (_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.restaurants;\n\n  // ì½¤ë³´ë°•ìŠ¤ state\n  const initialProvince = urlLat ? \"all\" : PROVINCES[0];\n  const initialDistrict = urlLat ? \"all\" : DISTRICTS_BY_PROVINCE[PROVINCES[0]][0];\n  const [selectedProvince, setSelectedProvince] = useState(initialProvince);\n  const [selectedDistrict, setSelectedDistrict] = useState(initialDistrict);\n\n  // API ë°ì´í„° state\n  const [isLoading, setIsLoading] = useState(false);\n  const [markers, setMarkers] = useState([]); // ì¹´ì¹´ì˜¤ ë§ˆì»¤ *ê°ì²´* ë°°ì—´\n  const [nearbyList, setNearbyList] = useState([]); // GET /nearby (ë¦¬ìŠ¤íŠ¸ìš©)\n  const [radius, setRadius] = useState(0.5); // ë°˜ê²½\n\n  // ì¹´ì¹´ì˜¤ë§µ ê°ì²´ state\n  const [mapInstance, setMapInstance] = useState(null);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const fetchNearbyRestaurants = async () => {\n    setIsLoading(true);\n    try {\n      const listData = await apiGet(`/restaurants/nearby?radius=${radius}`);\n      setNearbyList(listData);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // 1. (ìˆ˜ì •) ë©”ì¸ useEffect: ì§€ë„ ì´ˆê¸°í™” ë° *ëª¨ë“  ë§ˆì»¤* ë¡œë”©\n  useEffect(() => {\n    let targetCoords;\n    if (source === 'geolocation' && urlLat && urlLng) {\n      targetCoords = {\n        lat: parseFloat(urlLat),\n        lng: parseFloat(urlLng)\n      };\n    } else {\n      const currentKey = `${selectedProvince} ${selectedDistrict}`;\n      targetCoords = LOCATION_COORDS[currentKey] || LOCATION_COORDS[\"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\"];\n    }\n    const fetchMarkersAndInitMap = async () => {\n      setIsLoading(true);\n      try {\n        const markerData = await response.json();\n        if (window.kakao && window.kakao.maps) {\n          window.kakao.maps.load(() => initMap(markerData, targetCoords));\n        } else {\n          const script = document.createElement(\"script\");\n          script.src = `//dapi.kakao.com/v2/maps/sdk.js?appkey=920ae06c68357b930c999434271d8194&autoload=false`;\n          script.async = true;\n          document.head.appendChild(script);\n          script.onload = () => {\n            window.kakao.maps.load(() => initMap(markerData, targetCoords));\n          };\n        }\n\n        // ì±—ë´‡ìœ¼ë¡œ ì§„ì…í•œ ê²Œ ì•„ë‹ ë•Œë§Œ ì´ˆê¸° ë¦¬ìŠ¤íŠ¸ ë¡œë”©\n        if (source !== 'chatbot') {\n          await fetchNearbyRestaurants();\n        }\n      } catch (error) {\n        console.error(\"Error fetching markers:\", error);\n        if (window.kakao && window.kakao.maps) {\n          window.kakao.maps.load(() => initMap([], targetCoords));\n        }\n      }\n    };\n    fetchMarkersAndInitMap();\n  }, []); // ìµœì´ˆ 1íšŒë§Œ ì‹¤í–‰\n\n  // 2. (ì‹ ê·œ) 'ë°˜ê²½(radius)'ì´ ë°”ë€” ë•Œë§ˆë‹¤ ì£¼ë³€ ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ \n  useEffect(() => {\n    // ë§µ ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆê³ , ì±—ë´‡ ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ API í˜¸ì¶œ\n    if (mapInstance && source !== 'chatbot') {\n      fetchNearbyRestaurants();\n    }\n  }, [radius, mapInstance, source]);\n\n  // 3. ì±—ë´‡ ì§„ì… ì‹œ\n  useEffect(() => {\n    if (source === 'chatbot' && chatbotRestaurants) {\n      console.log(\"ì±—ë´‡ ì¶”ì²œ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•©ë‹ˆë‹¤.\");\n      setNearbyList(chatbotRestaurants);\n    }\n  }, [source, chatbotRestaurants]);\n\n  // âœ¨ (ì¶”ê°€) ì±—ë´‡ìœ¼ë¡œ ì§„ì… ì‹œ nearbyList state ì—…ë°ì´íŠ¸\n  //ì´ìƒí•˜ë©´ ì´ useEffect ì§€ìš°ê¸°\n\n  useEffect(() => {\n    if (source === 'chatbot' && chatbotRestaurants) {\n      console.log(\"ì±—ë´‡ ì¶”ì²œ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•©ë‹ˆë‹¤.\");\n      setNearbyList(chatbotRestaurants);\n    }\n  }, [source, chatbotRestaurants]);\n\n  // 4. ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì‹œ ì§€ë„ ì´ë™\n  // (ì§€ë„ ì¤‘ì‹¬ ì´ë™ + í•˜ë‹¨ íŒ¨ë„ ë‹«ê¸°)\n  useEffect(() => {\n    if (!mapInstance) return;\n    let targetCoords;\n    if (selectedProvince === \"all\" && urlLat && urlLng) {\n      // (ë‹˜ì˜ 'geolocation' ëª¨ë“œ)\n      targetCoords = {\n        lat: parseFloat(urlLat),\n        lng: parseFloat(urlLng)\n      };\n    } else {\n      // (íŒ€ì›/ë‹˜ì˜ 'ì£¼ì†Œ ì§€ì •' ëª¨ë“œ)\n      const currentKey = `${selectedProvince} ${selectedDistrict}`;\n      targetCoords = LOCATION_COORDS[currentKey] || LOCATION_COORDS[\"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\"];\n    }\n    const center = new window.kakao.maps.LatLng(targetCoords.lat, targetCoords.lng);\n    mapInstance.setCenter(center);\n\n    // (ì¶”ê°€) ì½¤ë³´ë°•ìŠ¤ ì¡°ì‘ ì‹œ, ì—´ë ¤ìˆë˜ í•˜ë‹¨ íŒ¨ë„ì„ ë‹«ìŠµë‹ˆë‹¤.\n    setSelectedRestaurant(null);\n  }, [mapInstance, selectedProvince, selectedDistrict, urlLat, urlLng]);\n\n  // --- (4) ì§€ë„ ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---\n\n  // (ìˆ˜ì •) initMap: ë§ˆì»¤ ìƒì„± + 'dragend' + API ì—°ë™ í´ë¦­ ì´ë²¤íŠ¸\n  const initMap = (markerData, targetCoords) => {\n    const center = new window.kakao.maps.LatLng(targetCoords.lat, targetCoords.lng);\n    const options = {\n      center,\n      level: 4\n    };\n    const map = new window.kakao.maps.Map(mapContainer.current, options);\n    const iw = new window.kakao.maps.InfoWindow({\n      removable: true,\n      zIndex: 1\n    });\n    setMapInstance(map);\n\n    // (ê¸°ì¡´) ë§ˆì»¤ ìƒì„± ë° í´ë¦­ ì´ë²¤íŠ¸ (GET /restaurant/detail)\n    const createdMarkers = markerData.map(resto => {\n      const markerPosition = new window.kakao.maps.LatLng(resto.lat, resto.lng);\n      const marker = new window.kakao.maps.Marker({\n        position: markerPosition\n      });\n      marker.markerLat = resto.lat;\n      marker.markerLng = resto.lng;\n      //marker.category = resto.category; // í•„ìš”ì‹œ ì‚¬ìš©\n      marker.restaurantId = resto.res_id;\n      marker.setMap(map);\n\n      // ë§ˆì»¤ í´ë¦­ ë¦¬ìŠ¤ë„ˆê°€ /detail APIë¥¼ í˜¸ì¶œí•˜ê³  stateë¥¼ ë³€ê²½\n      window.kakao.maps.event.addListener(marker, 'click', async () => {\n        setIsLoading(true);\n        map.panTo(markerPosition);\n        try {\n          const detailData = await apiGet(`/restaurant/detail?lat=${marker.markerLat}&lng=${marker.markerLng}`);\n          setSelectedRestaurant(detailData);\n        } catch (error) {\n          console.error(\"Error fetching restaurant detail:\", error);\n          alert(\"ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\n        } finally {\n          setIsLoading(false);\n        }\n      });\n      return marker;\n    });\n    setMarkers(createdMarkers);\n    window.kakao.maps.event.addListener(map, 'dragend', handleMapDragEnd);\n    setIsLoading(false); // ì´ˆê¸° ë¡œë”© ì™„ë£Œ\n  };\n\n  //ì§€ë„ ë“œë˜ê·¸ ì¢…ë£Œ ì‹œ\n  const handleMapDragEnd = async () => {\n    if (!mapInstance) return;\n    const newCenter = mapInstance.getCenter();\n    const lat = newCenter.getLat();\n    const lng = newCenter.getLng();\n    await apiPost(\"/location\", {\n      lat,\n      lng\n    });\n    setSelectedProvince(\"all\");\n    setSelectedDistrict(\"all\");\n    await fetchNearbyRestaurants();\n  };\n\n  // (ì‹ ê·œ) \"í˜„ìœ„ì¹˜ë¡œ\" ë²„íŠ¼ í´ë¦­ ì‹œ\n  const handleGoToCurrentLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(async position => {\n        const lat = position.coords.latitude;\n        const lng = position.coords.longitude;\n        const newPos = new window.kakao.maps.LatLng(lat, lng);\n\n        // 1. ì„¸ì…˜ ìœ„ì¹˜ ì—…ë°ì´íŠ¸\n        await fetch(`${API_BASE_URL}/location`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            lat,\n            lng\n          })\n        });\n\n        // 2. ì§€ë„ ì´ë™\n        mapInstance.panTo(newPos);\n\n        // 3. ì½¤ë³´ë°•ìŠ¤ 'all'ë¡œ ë¦¬ì…‹\n        setSelectedProvince(\"all\");\n        setSelectedDistrict(\"all\");\n\n        // 4. ìƒˆ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ì£¼ë³€ ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ \n        await fetchNearbyRestaurants();\n      });\n    }\n  };\n\n  // ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì‹œ\n  const handleProvinceChange = e => {\n    const newProvince = e.target.value;\n    setSelectedProvince(newProvince);\n\n    // 'all'ì„ ì„ íƒí•˜ë©´ ë‘ ë²ˆì§¸ ì½¤ë³´ë°•ìŠ¤ë„ 'all'ë¡œ ì„¤ì •\n    if (newProvince === \"all\") {\n      setSelectedDistrict(\"all\");\n    } else {\n      // ë‹¤ë¥¸ ì‹œ/ë„ë¥¼ ì„ íƒí•˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ì²« ë²ˆì§¸ êµ¬/êµ°ìœ¼ë¡œ ì„¤ì •\n      const newDistricts = DISTRICTS_BY_PROVINCE[newProvince];\n      if (newDistricts && newDistricts.length > 0) {\n        setSelectedDistrict(newDistricts[0]);\n      }\n    }\n  };\n\n  // ì‚¬ì´ë“œë°” ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œ\n  const handleRestaurantClick = async restaurant => {\n    if (!mapInstance) return;\n    setIsLoading(true);\n    const {\n      lat,\n      lng\n    } = restaurant; // nearbyListì—ì„œ ì˜¨ ë°ì´í„°\n    const moveLatLng = new window.kakao.maps.LatLng(lat, lng);\n    mapInstance.panTo(moveLatLng);\n    try {\n      // ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œì—ë„ /detail APIë¥¼ í˜¸ì¶œ (ë¦¬ë·° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´)\n      const detailData = await apiGet(`/restaurant/detail?lat=${lat}&lng=${lng}`);\n      setSelectedRestaurant(detailData);\n    } catch (error) {\n      console.error(\"Error fetching restaurant detail:\", error);\n      alert(\"ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Map\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(-1),\n          className: \"back-btn\",\n          children: \"\\uB4A4\\uB85C\\uAC00\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD604\\uC7AC \\uC704\\uCE58:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedProvince,\n          onChange: handleProvinceChange,\n          style: {\n            color: selectedProvince === 'all' ? '#999' : '#000'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: \"--\\uC804\\uCCB4--\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 25\n          }, this), PROVINCES.map(province => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: province,\n            children: province\n          }, province, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedDistrict,\n          onChange: e => setSelectedDistrict(e.target.value),\n          style: {\n            color: selectedDistrict === 'all' ? '#999' : '#000'\n          },\n          disabled: selectedProvince === \"all\",\n          children: selectedProvince === \"all\" ? /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: \"--\\uC804\\uCCB4--\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 29\n          }, this) : DISTRICTS_BY_PROVINCE[selectedProvince] && DISTRICTS_BY_PROVINCE[selectedProvince].map(district => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: district,\n            children: district\n          }, district, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGoToCurrentLocation,\n          className: \"current-location-btn\",\n          children: \"\\uD604\\uC704\\uCE58\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"kakao-map\",\n        ref: mapContainer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 17\n      }, this), selectedRestaurant && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detail-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"close-btn\",\n          onClick: () => setSelectedRestaurant(null),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedRestaurant.res_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uC8FC\\uC18C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 32\n            }, this), \" \", selectedRestaurant.address || \"-\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uC804\\uD654\\uBC88\\uD638:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 32\n            }, this), \" \", selectedRestaurant.phone || \"-\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uCE74\\uD14C\\uACE0\\uB9AC:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 32\n            }, this), \" \", selectedRestaurant.category || \"-\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD3C9\\uC810:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 32\n            }, this), \" \", (_selectedRestaurant$s = selectedRestaurant.score) !== null && _selectedRestaurant$s !== void 0 ? _selectedRestaurant$s : \"-\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\uB9AC\\uBDF0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 29\n          }, this), !selectedRestaurant.reviews || selectedRestaurant.reviews.length === 0 ?\n          /*#__PURE__*/\n          // ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš°\n          _jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\uC791\\uC131\\uB41C \\uB9AC\\uBDF0\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"review-btn\",\n              onClick: () => navigate(`/reviews/${selectedRestaurant.res_id}`),\n              children: \"+ \\uB9AC\\uBDF0 \\uC791\\uC131\\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 33\n          }, this) :\n          /*#__PURE__*/\n          // ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš°\n          _jsxDEV(\"div\", {\n            children: [selectedRestaurant.reviews.map(review => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"review-preview\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: review.author\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 45\n              }, this)]\n            }, review.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 41\n            }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"review-btn\",\n              onClick: () => navigate(`/reviews/${selectedRestaurant.res_id}`),\n              children: [\"\\uB9AC\\uBDF0 \\uB354\\uBCF4\\uAE30 (\", selectedRestaurant.review_count, \"\\uAC1C)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Sidebar\",\n      children: [source !== 'chatbot' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"RadiusFilter\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"\\uBC18\\uACBD \\uC120\\uD0DD:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 25\n        }, this), [0.5, 1.0, 3.0].map(km => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRadius(km),\n          className: radius === km ? 'active' : '',\n          children: [km, \"km\"]\n        }, km, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 21\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px',\n          textAlign: 'center'\n        },\n        children: \"\\uB85C\\uB529 \\uC911... \\uD83C\\uDF00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"RestaurantList\",\n        children: [!isLoading && nearbyList.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '20px',\n            color: '#888',\n            textAlign: 'center'\n          },\n          children: source === 'chatbot' ? 'ì¶”ì²œëœ ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤.' : 'ì£¼ë³€ ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 25\n        }, this), nearbyList.map(restaurant => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleRestaurantClick(restaurant),\n          className: \"list-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: restaurant.res_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: restaurant.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 29\n          }, this)]\n        }, restaurant.res_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 348,\n    columnNumber: 9\n  }, this);\n}\n_s(Map, \"3TI4zlBFZe3TdoDDLp6D+6ckY24=\", false, function () {\n  return [useLocation, useSearchParams, useNavigate];\n});\n_c = Map;\nexport default Map;\nvar _c;\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useLocation","useSearchParams","useNavigate","jsxDEV","_jsxDEV","API_BASE","apiGet","path","res","fetch","method","credentials","ok","Error","status","json","apiPost","body","headers","JSON","stringify","API_BASE_URL","Map","_s","_location$state","_location$state2","_selectedRestaurant$s","mapContainer","location","searchParams","navigate","PROVINCES","DISTRICTS_BY_PROVINCE","LOCATION_COORDS","lat","lng","source","state","urlLat","get","urlLng","chatbotRestaurants","restaurants","initialProvince","initialDistrict","selectedProvince","setSelectedProvince","selectedDistrict","setSelectedDistrict","isLoading","setIsLoading","markers","setMarkers","nearbyList","setNearbyList","radius","setRadius","mapInstance","setMapInstance","selectedRestaurant","setSelectedRestaurant","fetchNearbyRestaurants","listData","error","console","targetCoords","parseFloat","currentKey","fetchMarkersAndInitMap","markerData","response","window","kakao","maps","load","initMap","script","document","createElement","src","async","head","appendChild","onload","log","center","LatLng","setCenter","options","level","map","current","iw","InfoWindow","removable","zIndex","createdMarkers","resto","markerPosition","marker","Marker","position","markerLat","markerLng","restaurantId","res_id","setMap","event","addListener","panTo","detailData","alert","handleMapDragEnd","newCenter","getCenter","getLat","getLng","handleGoToCurrentLocation","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","newPos","handleProvinceChange","e","newProvince","target","value","newDistricts","length","handleRestaurantClick","restaurant","moveLatLng","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onChange","style","color","province","disabled","district","id","ref","res_name","address","phone","category","score","reviews","review","author","content","review_count","km","padding","textAlign","_c","$RefreshReg$"],"sources":["C:/Users/du200/Documents/GitHub/frontend/my-app/src/map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useLocation, useSearchParams, useNavigate } from \"react-router-dom\";\r\nimport \"./map.css\";\r\n\r\nconst API_BASE = \"http://localhost:5000\"; \r\nasync function apiGet(path) {\r\n    const res = await fetch(`${API_BASE}${path}`, {\r\n        method: \"GET\",\r\n        credentials: \"include\", // ì„¸ì…˜ ìœ ì§€ë¥¼ ìœ„í•´ í•„ìˆ˜\r\n    });\r\n    if (!res.ok) throw new Error(`API GET Error: ${res.status}`);\r\n    return res.json();\r\n}\r\nasync function apiPost(path, body) {\r\n    const res = await fetch(`${API_BASE}${path}`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\", // ì„¸ì…˜ ìœ ì§€ë¥¼ ìœ„í•´ í•„ìˆ˜\r\n        body: JSON.stringify(body),\r\n    });\r\n    if (!res.ok) throw new Error(`API POST Error: ${res.status}`);\r\n    return res.json();\r\n}\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nfunction Map() {\r\n\r\n    const mapContainer = useRef(null); \r\n    const location = useLocation();\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n\r\n    // ìœ„ì¹˜ ì •ë³´ ë°ì´í„°\r\n    const PROVINCES = [\"ì„œìš¸íŠ¹ë³„ì‹œ\", \"ê²½ê¸°ë„\"];\r\n    const DISTRICTS_BY_PROVINCE = {\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ\": [\r\n      \"ì€í‰êµ¬\",\r\n      \"ì˜ë“±í¬êµ¬\",\r\n      \"ìš©ì‚°êµ¬\",\r\n      \"ë™ëŒ€ë¬¸êµ¬\",\r\n      \"ë™ì‘êµ¬\",\r\n      \"ê´‘ì§„êµ¬\",\r\n      \"ë§ˆí¬êµ¬\",\r\n      \"ì„œì´ˆêµ¬\",\r\n      \"ê°•ë™êµ¬\",\r\n      \"ì„±ë¶êµ¬\",\r\n      \"ë„ë´‰êµ¬\",\r\n      \"ë…¸ì›êµ¬\",\r\n      \"ê°•ì„œêµ¬\",\r\n      \"ì–‘ì²œêµ¬\",\r\n      \"êµ¬ë¡œêµ¬\",\r\n      \"ê¸ˆì²œêµ¬\",\r\n      \"ì†¡íŒŒêµ¬\",\r\n      \"ê°•ë‚¨êµ¬\",\r\n    ],\r\n    \"ê²½ê¸°ë„\": [\"í™”ì„±ì‹œ ì™€ìš°ë¦¬\", \"ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬\", \"ìˆ˜ì›ì‹œ ì¥ì•ˆêµ¬\", \"ìˆ˜ì›ì‹œ\"],\r\n  };\r\n\r\n  // ìœ„ì¹˜ ì¢Œí‘œ ë°ì´í„°\r\n  const LOCATION_COORDS = {\r\n    // --- ì„œìš¸ ---\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\": { lat: 37.6027, lng: 126.9292 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬\": { lat: 37.5263, lng: 126.8962 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ìš©ì‚°êµ¬\": { lat: 37.5311, lng: 126.9819 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë™ëŒ€ë¬¸êµ¬\": { lat: 37.5744, lng: 127.0396 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë™ì‘êµ¬\": { lat: 37.5124, lng: 126.9398 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê´‘ì§„êµ¬\": { lat: 37.5384, lng: 127.0822 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë§ˆí¬êµ¬\": { lat: 37.5609, lng: 126.9084 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬\": { lat: 37.4836, lng: 127.0327 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë™êµ¬\": { lat: 37.5301, lng: 127.1238 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì„±ë¶êµ¬\": { lat: 37.5894, lng: 127.0167 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë„ë´‰êµ¬\": { lat: 37.6688, lng: 127.0471 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ë…¸ì›êµ¬\": { lat: 37.6543, lng: 127.0565 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ì„œêµ¬\": { lat: 37.5509, lng: 126.849 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì–‘ì²œêµ¬\": { lat: 37.5169, lng: 126.8664 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ êµ¬ë¡œêµ¬\": { lat: 37.4954, lng: 126.8874 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê¸ˆì²œêµ¬\": { lat: 37.4568, lng: 126.895 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ì†¡íŒŒêµ¬\": { lat: 37.5145, lng: 127.1066 },\r\n    \"ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬\": { lat: 37.5173, lng: 127.0473 },\r\n\r\n    // --- ê²½ê¸° ---\r\n    \"ê²½ê¸°ë„ í™”ì„±ì‹œ ì™€ìš°ë¦¬\": { lat: 37.2092, lng: 126.9769 },\r\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ íŒ”ë‹¬êµ¬\": { lat: 37.292, lng: 127.0107 },\r\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì¥ì•ˆêµ¬\": { lat: 37.2951, lng: 126.9739 },\r\n    \"ê²½ê¸°ë„ ìˆ˜ì›ì‹œ\": { lat: 37.2636, lng: 127.0286 },\r\n  };\r\n    //const foodCategories = [\"ì „ì²´\", \"í•œì‹\", \"ì¤‘ì‹\", \"ì¼ì‹\", \"ì–‘ì‹\", \"ì¹´í˜\"];\r\n\r\n\r\n    // --- State ì •ì˜ ---\r\n    const source = location.state?.source; // 'geolocation', 'address', 'chatbot'\r\n    const urlLat = searchParams.get('lat');\r\n    const urlLng = searchParams.get('lng');\r\n    const chatbotRestaurants = location.state?.restaurants;\r\n\r\n    // ì½¤ë³´ë°•ìŠ¤ state\r\n    const initialProvince = urlLat ? \"all\" : PROVINCES[0];\r\n    const initialDistrict = urlLat ? \"all\" : DISTRICTS_BY_PROVINCE[PROVINCES[0]][0];\r\n\r\n    const [selectedProvince, setSelectedProvince] = useState(initialProvince);\r\n    const [selectedDistrict, setSelectedDistrict] = useState(initialDistrict);\r\n\r\n    // API ë°ì´í„° state\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [markers, setMarkers] = useState([]); // ì¹´ì¹´ì˜¤ ë§ˆì»¤ *ê°ì²´* ë°°ì—´\r\n    const [nearbyList, setNearbyList] = useState([]); // GET /nearby (ë¦¬ìŠ¤íŠ¸ìš©)\r\n    const [radius, setRadius] = useState(0.5); // ë°˜ê²½\r\n\r\n    // ì¹´ì¹´ì˜¤ë§µ ê°ì²´ state\r\n    const [mapInstance, setMapInstance] = useState(null);\r\n    const [selectedRestaurant, setSelectedRestaurant] = useState(null);\r\n\r\n    const fetchNearbyRestaurants = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const listData = await apiGet(`/restaurants/nearby?radius=${radius}`);\r\n            setNearbyList(listData);\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // 1. (ìˆ˜ì •) ë©”ì¸ useEffect: ì§€ë„ ì´ˆê¸°í™” ë° *ëª¨ë“  ë§ˆì»¤* ë¡œë”©\r\n    useEffect(() => {\r\n        let targetCoords;\r\n        if (source === 'geolocation' && urlLat && urlLng) {\r\n            targetCoords = { lat: parseFloat(urlLat), lng: parseFloat(urlLng) };\r\n        } else {\r\n            const currentKey = `${selectedProvince} ${selectedDistrict}`;\r\n            targetCoords = LOCATION_COORDS[currentKey] || LOCATION_COORDS[\"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\"];\r\n        }\r\n\r\n        const fetchMarkersAndInitMap = async () => {\r\n            setIsLoading(true);\r\n            try {\r\n                const markerData = await response.json();\r\n\r\n                if (window.kakao && window.kakao.maps) {\r\n                    window.kakao.maps.load(() => initMap(markerData, targetCoords));\r\n                } else {\r\n                    const script = document.createElement(\"script\");\r\n                    script.src = `//dapi.kakao.com/v2/maps/sdk.js?appkey=920ae06c68357b930c999434271d8194&autoload=false`;\r\n                    script.async = true;\r\n                    document.head.appendChild(script);\r\n                    script.onload = () => {\r\n                        window.kakao.maps.load(() => initMap(markerData, targetCoords));\r\n                    };\r\n                    \r\n                }\r\n\r\n                // ì±—ë´‡ìœ¼ë¡œ ì§„ì…í•œ ê²Œ ì•„ë‹ ë•Œë§Œ ì´ˆê¸° ë¦¬ìŠ¤íŠ¸ ë¡œë”©\r\n                if (source !== 'chatbot') {\r\n                    await fetchNearbyRestaurants();\r\n                }\r\n\r\n            } catch (error) {\r\n                console.error(\"Error fetching markers:\", error);\r\n                if (window.kakao && window.kakao.maps) {\r\n                    window.kakao.maps.load(() => initMap([], targetCoords));\r\n                }\r\n            } \r\n        };\r\n\r\n        fetchMarkersAndInitMap();\r\n    }, []); // ìµœì´ˆ 1íšŒë§Œ ì‹¤í–‰\r\n\r\n    // 2. (ì‹ ê·œ) 'ë°˜ê²½(radius)'ì´ ë°”ë€” ë•Œë§ˆë‹¤ ì£¼ë³€ ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ \r\n    useEffect(() => {\r\n        // ë§µ ë¡œë”©ì´ ì™„ë£Œë˜ì—ˆê³ , ì±—ë´‡ ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ API í˜¸ì¶œ\r\n        if (mapInstance && source !== 'chatbot') {\r\n            fetchNearbyRestaurants();\r\n        }\r\n    }, [radius, mapInstance, source]);\r\n\r\n    // 3. ì±—ë´‡ ì§„ì… ì‹œ\r\n    useEffect(() => {\r\n        if (source === 'chatbot' && chatbotRestaurants) {\r\n            console.log(\"ì±—ë´‡ ì¶”ì²œ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•©ë‹ˆë‹¤.\");\r\n            setNearbyList(chatbotRestaurants);\r\n        }\r\n    }, [source, chatbotRestaurants]);\r\n\r\n   // âœ¨ (ì¶”ê°€) ì±—ë´‡ìœ¼ë¡œ ì§„ì… ì‹œ nearbyList state ì—…ë°ì´íŠ¸\r\n   //ì´ìƒí•˜ë©´ ì´ useEffect ì§€ìš°ê¸°\r\n   \r\n    useEffect(() => {\r\n        if (source === 'chatbot' && chatbotRestaurants) {\r\n            console.log(\"ì±—ë´‡ ì¶”ì²œ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•©ë‹ˆë‹¤.\");\r\n            setNearbyList(chatbotRestaurants);\r\n        }\r\n    }, [source, chatbotRestaurants]);\r\n\r\n    // 4. ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì‹œ ì§€ë„ ì´ë™\r\n    // (ì§€ë„ ì¤‘ì‹¬ ì´ë™ + í•˜ë‹¨ íŒ¨ë„ ë‹«ê¸°)\r\n    useEffect(() => {\r\n        if (!mapInstance) return;\r\n\r\n        let targetCoords;\r\n        if (selectedProvince === \"all\" && urlLat && urlLng) {\r\n            // (ë‹˜ì˜ 'geolocation' ëª¨ë“œ)\r\n            targetCoords = { lat: parseFloat(urlLat), lng: parseFloat(urlLng) };\r\n        } else {\r\n            // (íŒ€ì›/ë‹˜ì˜ 'ì£¼ì†Œ ì§€ì •' ëª¨ë“œ)\r\n            const currentKey = `${selectedProvince} ${selectedDistrict}`;\r\n            targetCoords = LOCATION_COORDS[currentKey] || LOCATION_COORDS[\"ì„œìš¸íŠ¹ë³„ì‹œ ì€í‰êµ¬\"];\r\n        }\r\n        \r\n        const center = new window.kakao.maps.LatLng(targetCoords.lat, targetCoords.lng);\r\n        mapInstance.setCenter(center);\r\n        \r\n        // (ì¶”ê°€) ì½¤ë³´ë°•ìŠ¤ ì¡°ì‘ ì‹œ, ì—´ë ¤ìˆë˜ í•˜ë‹¨ íŒ¨ë„ì„ ë‹«ìŠµë‹ˆë‹¤.\r\n        setSelectedRestaurant(null); \r\n\r\n    }, [mapInstance, selectedProvince, selectedDistrict, urlLat, urlLng]);\r\n    \r\n\r\n    // --- (4) ì§€ë„ ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ---\r\n\r\n    // (ìˆ˜ì •) initMap: ë§ˆì»¤ ìƒì„± + 'dragend' + API ì—°ë™ í´ë¦­ ì´ë²¤íŠ¸\r\n    const initMap = (markerData, targetCoords) => {\r\n        const center = new window.kakao.maps.LatLng(targetCoords.lat, targetCoords.lng);\r\n        const options = { center, level: 4 };\r\n        const map = new window.kakao.maps.Map(mapContainer.current, options);\r\n        const iw = new window.kakao.maps.InfoWindow({ removable: true, zIndex: 1 });\r\n\r\n        setMapInstance(map);\r\n\r\n        // (ê¸°ì¡´) ë§ˆì»¤ ìƒì„± ë° í´ë¦­ ì´ë²¤íŠ¸ (GET /restaurant/detail)\r\n        const createdMarkers = markerData.map(resto => {\r\n            const markerPosition = new window.kakao.maps.LatLng(resto.lat, resto.lng);\r\n            const marker = new window.kakao.maps.Marker({ position: markerPosition });\r\n                marker.markerLat = resto.lat;\r\n                marker.markerLng = resto.lng;\r\n                //marker.category = resto.category; // í•„ìš”ì‹œ ì‚¬ìš©\r\n                marker.restaurantId = resto.res_id;\r\n                marker.setMap(map);\r\n\r\n                // ë§ˆì»¤ í´ë¦­ ë¦¬ìŠ¤ë„ˆê°€ /detail APIë¥¼ í˜¸ì¶œí•˜ê³  stateë¥¼ ë³€ê²½\r\n                window.kakao.maps.event.addListener(marker, 'click', async () => {\r\n                setIsLoading(true);\r\n                map.panTo(markerPosition);\r\n\r\n                try {\r\n                    const detailData = await apiGet(`/restaurant/detail?lat=${marker.markerLat}&lng=${marker.markerLng}`);\r\n                    setSelectedRestaurant(detailData);\r\n\r\n                    } catch (error) {\r\n                        console.error(\"Error fetching restaurant detail:\", error);\r\n                        alert(\"ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n                    } finally {\r\n                        setIsLoading(false);\r\n                    }\r\n                });\r\n            return marker;\r\n        });\r\n        setMarkers(createdMarkers);\r\n        window.kakao.maps.event.addListener(map, 'dragend', handleMapDragEnd);\r\n\r\n        setIsLoading(false);// ì´ˆê¸° ë¡œë”© ì™„ë£Œ\r\n    };\r\n\r\n    //ì§€ë„ ë“œë˜ê·¸ ì¢…ë£Œ ì‹œ\r\n    const handleMapDragEnd = async () => {\r\n        if (!mapInstance) return;\r\n        const newCenter = mapInstance.getCenter();\r\n        const lat = newCenter.getLat();\r\n        const lng = newCenter.getLng();\r\n\r\n        await apiPost(\"/location\", { lat, lng });\r\n        \r\n        setSelectedProvince(\"all\");\r\n        setSelectedDistrict(\"all\");\r\n\r\n        await fetchNearbyRestaurants();\r\n    };\r\n\r\n    // (ì‹ ê·œ) \"í˜„ìœ„ì¹˜ë¡œ\" ë²„íŠ¼ í´ë¦­ ì‹œ\r\n    const handleGoToCurrentLocation = () => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(async (position) => {\r\n                const lat = position.coords.latitude;\r\n                const lng = position.coords.longitude;\r\n                const newPos = new window.kakao.maps.LatLng(lat, lng);\r\n\r\n                // 1. ì„¸ì…˜ ìœ„ì¹˜ ì—…ë°ì´íŠ¸\r\n                await fetch(`${API_BASE_URL}/location`, {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ lat, lng }),\r\n                });\r\n\r\n                // 2. ì§€ë„ ì´ë™\r\n                mapInstance.panTo(newPos);\r\n                \r\n                // 3. ì½¤ë³´ë°•ìŠ¤ 'all'ë¡œ ë¦¬ì…‹\r\n                setSelectedProvince(\"all\");\r\n                setSelectedDistrict(\"all\");\r\n\r\n                // 4. ìƒˆ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ ì£¼ë³€ ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸ ê°±ì‹ \r\n                await fetchNearbyRestaurants();\r\n            });\r\n        }\r\n    };\r\n    \r\n    // ì½¤ë³´ë°•ìŠ¤ ë³€ê²½ ì‹œ\r\n    const handleProvinceChange = (e) => {\r\n        const newProvince = e.target.value;\r\n        setSelectedProvince(newProvince);\r\n        \r\n        // 'all'ì„ ì„ íƒí•˜ë©´ ë‘ ë²ˆì§¸ ì½¤ë³´ë°•ìŠ¤ë„ 'all'ë¡œ ì„¤ì •\r\n        if (newProvince === \"all\") {\r\n            setSelectedDistrict(\"all\");\r\n        } else {\r\n            // ë‹¤ë¥¸ ì‹œ/ë„ë¥¼ ì„ íƒí•˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ì²« ë²ˆì§¸ êµ¬/êµ°ìœ¼ë¡œ ì„¤ì •\r\n            const newDistricts = DISTRICTS_BY_PROVINCE[newProvince];\r\n            if (newDistricts && newDistricts.length > 0) {\r\n                setSelectedDistrict(newDistricts[0]);\r\n            }\r\n        }\r\n    };\r\n    \r\n    // ì‚¬ì´ë“œë°” ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œ\r\n    const handleRestaurantClick = async (restaurant) => {\r\n        if (!mapInstance) return;\r\n        setIsLoading(true);\r\n\r\n        const { lat, lng } = restaurant; // nearbyListì—ì„œ ì˜¨ ë°ì´í„°\r\n        const moveLatLng = new window.kakao.maps.LatLng(lat, lng);\r\n        mapInstance.panTo(moveLatLng);\r\n\r\n        try {\r\n            // ë¦¬ìŠ¤íŠ¸ í´ë¦­ ì‹œì—ë„ /detail APIë¥¼ í˜¸ì¶œ (ë¦¬ë·° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´)\r\n            const detailData = await apiGet(`/restaurant/detail?lat=${lat}&lng=${lng}`);\r\n            setSelectedRestaurant(detailData);\r\n\r\n        } catch (error) {\r\n            console.error(\"Error fetching restaurant detail:\", error);\r\n            alert(\"ìƒì„¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"map-container\">\r\n            \r\n            {/* (A) ì™¼ìª½: ì§€ë„ ë° ìœ„ì¹˜ ì„ íƒ ì˜ì—­ */}\r\n            <div className=\"Map\">\r\n                <div className=\"map-controls\">\r\n                    <button\r\n                        onClick={() => navigate(-1)}\r\n                        className=\"back-btn\"\r\n                    >ë’¤ë¡œê°€ê¸°</button>\r\n                    <h1>í˜„ì¬ ìœ„ì¹˜:</h1>\r\n                    \r\n                    {/* ì‹œ/ë„ ì½¤ë³´ë°•ìŠ¤ */}\r\n                    <select \r\n                        value={selectedProvince} \r\n                        onChange={handleProvinceChange}\r\n                        style={{ color: selectedProvince === 'all' ? '#999' : '#000' }}\r\n                    >\r\n                        <option value=\"all\">--ì „ì²´--</option>\r\n                        {PROVINCES.map((province) => (\r\n                            <option key={province} value={province}>{province}</option>\r\n                        ))}\r\n                    </select>\r\n\r\n                    {/* ì‹œ/êµ°/êµ¬ ì½¤ë³´ë°•ìŠ¤ */}\r\n                    <select \r\n                        value={selectedDistrict} \r\n                        onChange={(e) => setSelectedDistrict(e.target.value)}\r\n                        style={{ color: selectedDistrict === 'all' ? '#999' : '#000' }}\r\n                        disabled={selectedProvince === \"all\"} \r\n                    >\r\n                        {selectedProvince === \"all\" ? (\r\n                            <option value=\"all\">--ì „ì²´--</option>\r\n                        ) : (\r\n                            DISTRICTS_BY_PROVINCE[selectedProvince] &&\r\n                            DISTRICTS_BY_PROVINCE[selectedProvince].map((district) => (\r\n                                <option key={district} value={district}>{district}</option>\r\n                            ))\r\n                        )}\r\n                    </select>\r\n                    <button onClick={handleGoToCurrentLocation} className=\"current-location-btn\">\r\n                        í˜„ìœ„ì¹˜\r\n                    </button>\r\n                </div>\r\n                \r\n                {/* ì§€ë„ í‘œì‹œ ì˜ì—­ */}\r\n                <div id=\"kakao-map\" ref={mapContainer} />\r\n            \r\n                {/* í•˜ë‹¨ ìƒì„¸ì •ë³´ íŒ¨ë„ */}\r\n                {selectedRestaurant && (\r\n                    <div className=\"detail-panel\">\r\n                        <button \r\n                            className=\"close-btn\" \r\n                            onClick={() => setSelectedRestaurant(null)}\r\n                        >\r\n                            X\r\n                        </button>\r\n                        \r\n                        <div className=\"info-section\">\r\n                            <h3>{selectedRestaurant.res_name}</h3>\r\n                            <p><strong>ì£¼ì†Œ:</strong> {selectedRestaurant.address || \"-\"}</p>\r\n                            <p><strong>ì „í™”ë²ˆí˜¸:</strong> {selectedRestaurant.phone || \"-\"}</p>\r\n                            <p><strong>ì¹´í…Œê³ ë¦¬:</strong> {selectedRestaurant.category || \"-\"}</p>\r\n                            <p><strong>í‰ì :</strong> {selectedRestaurant.score ?? \"-\"}</p>\r\n                        </div>\r\n\r\n                        <div className=\"review-section\">\r\n                            <h4>ë¦¬ë·°</h4>\r\n                            {(!selectedRestaurant.reviews || selectedRestaurant.reviews.length === 0) ? (\r\n                                // ë¦¬ë·°ê°€ ì—†ëŠ” ê²½ìš°\r\n                                <div>\r\n                                    <p>ì‘ì„±ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                                    <button \r\n                                        className=\"review-btn\"\r\n                                        onClick={() => navigate(`/reviews/${selectedRestaurant.res_id}`)}\r\n                                    >\r\n                                        + ë¦¬ë·° ì‘ì„±í•˜ê¸°\r\n                                    </button>\r\n                                </div>\r\n                            ) : (\r\n                                // ë¦¬ë·°ê°€ ìˆëŠ” ê²½ìš°\r\n                                <div>\r\n                                    {selectedRestaurant.reviews.map(review => (\r\n                                        <div key={review.id} className=\"review-preview\">\r\n                                            <strong>{review.author}</strong>\r\n                                            <p>{review.content}</p>\r\n                                        </div>\r\n                                    ))}\r\n                                    <button \r\n                                        className=\"review-btn\"\r\n                                        onClick={() => navigate(`/reviews/${selectedRestaurant.res_id}`)}\r\n                                    >\r\n                                        ë¦¬ë·° ë”ë³´ê¸° ({selectedRestaurant.review_count}ê°œ)\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n            </div>\r\n\r\n            {/* ì‹ë‹¹ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */}\r\n            <div className=\"Sidebar\">\r\n                {source !== 'chatbot' && (\r\n                    <div className=\"RadiusFilter\">\r\n                        <strong>ë°˜ê²½ ì„ íƒ:</strong>\r\n                        {[0.5, 1.0, 3.0].map(km => (\r\n                            <button\r\n                                key={km}\r\n                                onClick={() => setRadius(km)}\r\n                                className={radius === km ? 'active' : ''}\r\n                            >\r\n                                {km}km\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n                \r\n                {isLoading && <div style={{ padding: '20px', textAlign: 'center' }}>ë¡œë”© ì¤‘... ğŸŒ€</div>}\r\n                \r\n                <div className=\"RestaurantList\">\r\n                    {!isLoading && nearbyList.length === 0 && (\r\n                        <div style={{ padding: '20px', color: '#888', textAlign: 'center' }}>\r\n                            {source === 'chatbot' ? 'ì¶”ì²œëœ ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤.' : 'ì£¼ë³€ ì‹ë‹¹ì´ ì—†ìŠµë‹ˆë‹¤.'}\r\n                        </div>\r\n                    )}\r\n                    \r\n                    {nearbyList.map(restaurant => (\r\n                        <div\r\n                            key={restaurant.res_id}\r\n                            onClick={() => handleRestaurantClick(restaurant)}\r\n                            className=\"list-item\" \r\n                        >\r\n                            <h3>{restaurant.res_name}</h3> \r\n                            <p>{restaurant.category}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Map;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}